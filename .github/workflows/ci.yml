name: CI

on:
  push:

env:
  ALLOWED_HOSTS: 'localhost'
  BOSDYN_CLIENT_LOGGING_VERBOSE: 'False'
  ROBOT_SSH_PORT: '22'
  ROBOT_SPOT_UTILS_ROOT_DIR: '/home/spot/src/spot-utils'
  ROBOT_LIBUVC_THETA_SAMPLE_ROOT_DIR: '/home/spot/src/libuvc-theta-sample'

jobs:
  unit-tests:
    name: Unit Tests
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.8.16'

      - name: Upgrade PIP
        run: python -m pip install --upgrade pip

      - name: Install Python packages
        run: pip install -r requirements.txt

      - name: Run unit tests
        run: python manage.py test tests
